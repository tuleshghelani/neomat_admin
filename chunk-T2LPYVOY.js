import{a as zt,b as Ht}from"./chunk-VTTL5WBB.js";import{Aa as Ot,Ba as wt,Ca as Dt,Da as vt,Ea as Et,Fa as qt,Ga as S,Ha as Tt,Ia as It,Ja as kt,Ka as Rt,L as Z,R as Q,ba as G,ca as J,ea as at,fa as ot,ga as rt,ha as lt,ia as dt,ja as mt,ka as ct,la as st,ma as pt,oa as ut,pa as _t,qa as gt,ra as ht,sa as Ct,ta as ft,ua as xt,va as Mt,wa as bt,xa as Pt,ya as St,za as yt}from"./chunk-RHFUL4ZL.js";import{$ as R,Ac as Y,Bb as s,Cb as w,Cc as tt,Db as D,E as T,Eb as v,Fc as et,Ga as d,Gb as j,Gc as nt,Ha as f,Hb as A,Ic as it,Kc as y,M as I,Oa as V,W as k,Xa as c,Ya as $,Za as g,bc as U,cb as F,ea as z,fc as W,gb as a,hb as o,ib as x,ic as b,j as E,ja as H,jb as p,kb as u,kc as P,mb as O,p as q,pa as h,pb as M,qa as C,rb as _,tc as K,vb as L,wb as B,xb as N,xc as X,zb as l}from"./chunk-BGR6RSDP.js";var Vt=(()=>{class t{constructor(e){this.http=e,this.baseURL=y.baseURL}getHeaders(){let e=localStorage.getItem("token");return new b().set("Authorization",`Bearer ${e}`)}getAllEnquiries(e=1,i=10){let r={page:e,pageSize:i};return this.http.post(`${this.baseURL}/api/enquiries/getAllEnquiries/`,r)}updateEnquiryStatus(e,i){return this.http.put(`${this.baseURL}/api/enquiries/updateStatus/`,{id:e,status:i},{headers:this.getHeaders()})}static{this.\u0275fac=function(i){return new(i||t)(z(P))}}static{this.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Nt=()=>[2,5,10,25,100];function jt(t,n){t&1&&(a(0,"div",2),x(1,"mat-spinner",3),o())}function At(t,n){t&1&&(a(0,"th",28),l(1," No. "),o())}function Ut(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.index,i=_(2);d(),s(" ",(i.currentPage-1)*i.pageSize+e+1," ")}}function Wt(t,n){t&1&&(a(0,"th",30),l(1," Name "),o())}function Zt(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit;d(),s(" ",e.name," ")}}function Qt(t,n){t&1&&(a(0,"th",30),l(1," Company "),o())}function Gt(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit;d(),s(" ",e.company_name," ")}}function Jt(t,n){t&1&&(a(0,"th",30),l(1," Email "),o())}function Kt(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit;d(),s(" ",e.email," ")}}function Xt(t,n){t&1&&(a(0,"th",30),l(1," Mobile "),o())}function Yt(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit;d(),s(" ",e.mobilenumber," ")}}function te(t,n){t&1&&(a(0,"th",30),l(1," Address "),o())}function ee(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit;d(),s(" ",e.address," ")}}function ne(t,n){t&1&&(a(0,"th",30),l(1," Country "),o())}function ie(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit;d(),s(" ",e.country," ")}}function ae(t,n){t&1&&(a(0,"th",30),l(1," Designation "),o())}function oe(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit;d(),s(" ",e.designation," ")}}function re(t,n){t&1&&(a(0,"th",30),l(1," Product Name "),o())}function le(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit;d(),s(" ",e.productname," ")}}function de(t,n){t&1&&(a(0,"th",30),l(1," Status "),o())}function me(t,n){if(t&1&&(a(0,"mat-option",34)(1,"mat-chip",35),l(2),o()()),t&2){let e=n.$implicit,i=_(3);g("value",e.value),d(),g("color",i.getStatusColor(e.value)),d(),s(" ",e.label," ")}}function ce(t,n){if(t&1){let e=O();a(0,"td",29)(1,"mat-form-field",31)(2,"mat-select",32),v("valueChange",function(r){let m=h(e).$implicit;return D(m.status,r)||(m.status=r),C(r)}),M("selectionChange",function(r){let m=h(e).$implicit,$t=_(2);return C($t.onStatusChange(m.id,r.value))}),c(3,me,3,3,"mat-option",33),o()()()}if(t&2){let e=n.$implicit,i=_(2);d(2),w("value",e.status),d(),g("ngForOf",i.statusOptions)}}function se(t,n){t&1&&(a(0,"th",30),l(1," Date "),o())}function pe(t,n){if(t&1&&(a(0,"td",29),l(1),o()),t&2){let e=n.$implicit,i=_(2);d(),s(" ",i.formatDate(e.created_at)," ")}}function ue(t,n){t&1&&x(0,"tr",36)}function _e(t,n){t&1&&x(0,"tr",37)}function ge(t,n){if(t&1&&(a(0,"tr",38)(1,"td",39),l(2),o()()),t&2){let e=_(2);d(),$("colspan",e.displayedColumns.length),d(),s(" ",e.error||"No enquiries found"," ")}}function he(t,n){if(t&1){let e=O();a(0,"div",4)(1,"table",5),p(2,6),c(3,At,2,0,"th",7)(4,Ut,2,1,"td",8),u(),p(5,9),c(6,Wt,2,0,"th",10)(7,Zt,2,1,"td",8),u(),p(8,11),c(9,Qt,2,0,"th",10)(10,Gt,2,1,"td",8),u(),p(11,12),c(12,Jt,2,0,"th",10)(13,Kt,2,1,"td",8),u(),p(14,13),c(15,Xt,2,0,"th",10)(16,Yt,2,1,"td",8),u(),p(17,14),c(18,te,2,0,"th",10)(19,ee,2,1,"td",8),u(),p(20,15),c(21,ne,2,0,"th",10)(22,ie,2,1,"td",8),u(),p(23,16),c(24,ae,2,0,"th",10)(25,oe,2,1,"td",8),u(),p(26,17),c(27,re,2,0,"th",10)(28,le,2,1,"td",8),u(),p(29,18),c(30,de,2,0,"th",10)(31,ce,4,2,"td",8),u(),p(32,19),c(33,se,2,0,"th",10)(34,pe,2,1,"td",8),u(),c(35,ue,1,0,"tr",20)(36,_e,1,0,"tr",21)(37,ge,3,2,"tr",22),o()(),a(38,"div",23)(39,"div",24),l(40," Goto Page "),a(41,"mat-form-field",25)(42,"input",26),v("ngModelChange",function(r){h(e);let m=_();return D(m.currentPage,r)||(m.currentPage=r),C(r)}),M("keyup.enter",function(){h(e);let r=_();return C(r.goToPage(r.currentPage))}),o()()(),a(43,"mat-paginator",27),M("page",function(r){h(e);let m=_();return C(m.onPageChange(r))}),o()()}if(t&2){let e=_();d(),g("dataSource",e.dataSource),d(34),g("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),d(),g("matRowDefColumns",e.displayedColumns),d(6),w("ngModel",e.currentPage),g("max",e.getTotalPages()),d(),g("length",e.totalRecords)("pageSize",e.pageSize)("pageSizeOptions",A(10,Nt))("pageIndex",e.currentPage-1)}}var Ke=(()=>{class t{constructor(e,i,r,m){this.http=e,this.ngZone=i,this.snackBar=r,this.enquiryService=m,this.displayedColumns=["no","name","company_name","email","mobilenumber","address","country","designation","productname","status","created_at"],this.dataSource=[],this.currentPage=1,this.pageSize=10,this.totalRecords=0,this.statusOptions=[{value:"P",label:"Pending"},{value:"C",label:"Completed"},{value:"D",label:"Declined"}],this.pagination={currentPage:1,pageSize:10,totalRecords:0,totalPages:0,hasNext:!1,hasPrevious:!1},this.isLoading=!1,this.customPageNumber=1,this.error=null,this.destroy$=new E}ngOnInit(){this.loadEnquiries()}getTotalPages(){return Math.ceil(this.totalRecords/this.pageSize)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.sort&&this.sort.sortChange.subscribe(()=>{this.loadEnquiries(1)})}loadEnquiries(e=1){if(this.isLoading)return;this.isLoading=!0,this.error=null;let i=localStorage.getItem("token");if(!i){this.showError("Authentication token not found");return}let r=new b().set("Authorization",`Bearer ${i}`);this.ngZone.runOutsideAngular(()=>{this.http.post(`${y.baseURL}/api/enquiries/getAllEnquiries/`,{page:e,pageSize:this.pagination.pageSize},{headers:r}).pipe(k(this.destroy$),T(m=>(this.ngZone.run(()=>this.showError("Failed to load enquiries")),q(null))),I(()=>{this.ngZone.run(()=>{this.isLoading=!1})})).subscribe(m=>{m&&this.ngZone.run(()=>{this.dataSource=m.data,this.pagination=m.pagination,this.customPageNumber=this.pagination.currentPage})})})}onPageChange(e){this.pagination.pageSize=e.pageSize,this.loadEnquiries(e.pageIndex+1)}goToPage(e){e>=1&&e<=this.pagination.totalPages&&this.loadEnquiries(e)}goToFirst(){this.loadEnquiries(1)}goToLast(){this.loadEnquiries(this.pagination.totalPages)}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}showError(e){this.error=e,this.snackBar.open(e,"Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]}),this.isLoading=!1}getStatusColor(e){switch(e){case"C":return"primary";case"D":return"warn";default:return"accent"}}getStatusText(e){switch(e){case"C":return"Completed";case"D":return"Declined";default:return"Pending"}}onStatusChange(e,i){this.enquiryService.updateEnquiryStatus(e,i).subscribe({next:r=>{this.snackBar.open(r.message,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]}),this.loadEnquiries(this.currentPage)},error:r=>{this.snackBar.open("Failed to update status","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}static{this.\u0275fac=function(i){return new(i||t)(f(P),f(V),f(G),f(Vt))}}static{this.\u0275cmp=H({type:t,selectors:[["app-dashboard"]],viewQuery:function(i,r){if(i&1&&L(S,5),i&2){let m;B(m=N())&&(r.sort=m.first)}},standalone:!0,features:[j],decls:8,vars:1,consts:[[1,"dashboard-container"],[1,"dashboard-card"],[1,"loading-spinner"],["diameter","40"],[1,"table-container"],["mat-table","","matSort","",1,"enquiries-table",3,"dataSource"],["matColumnDef","no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","company_name"],["matColumnDef","email"],["matColumnDef","mobilenumber"],["matColumnDef","address"],["matColumnDef","country"],["matColumnDef","designation"],["matColumnDef","productname"],["matColumnDef","status"],["matColumnDef","created_at"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"pagination-container"],[1,"pagination-controls"],["appearance","outline",1,"page-number-input"],["matInput","","type","number","min","1",3,"ngModelChange","keyup.enter","ngModel","max"],["showFirstLastButtons","","aria-label","Select page",3,"page","length","pageSize","pageSizeOptions","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["appearance","outline",1,"status-select"],[3,"valueChange","selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["selected","",3,"color"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),l(4,"Enquiries"),o()(),a(5,"mat-card-content"),c(6,jt,2,0,"div",2)(7,he,44,11),o()()()),i&2&&(d(6),F(6,r.isLoading?6:7))},dependencies:[W,U,it,K,tt,X,nt,et,Y,Dt,ht,ft,Pt,xt,Ct,St,Mt,bt,yt,Ot,wt,qt,Et,ot,at,lt,rt,Q,ut,pt,dt,ct,st,mt,Rt,kt,vt,J,It,S,Tt,Ht,zt,gt,_t,Z],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;min-height:calc(100vh - 64px)}@media screen and (max-width: 600px){.dashboard-container[_ngcontent-%COMP%]{padding:10px}}.dashboard-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:8px;height:100%}.dashboard-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px;background-color:var(--primary);border-radius:8px 8px 0 0}.dashboard-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:var(--text-white);margin:0;font-size:1.25rem;font-weight:500}.dashboard-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.table-container[_ngcontent-%COMP%]{margin-top:16px;overflow-x:auto}.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{white-space:nowrap;padding:16px;font-weight:500;color:var(--text-primary);background-color:var(--primary-lighter)}.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-child{width:80px;text-align:center}.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:12px 16px}.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-child{text-align:center;color:var(--primary);font-weight:500}.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--hover)}.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   tr.mat-row.no-data-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:16px;font-style:italic;color:var(--text-secondary)}@media screen and (max-width: 600px){.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:8px;font-size:.875rem}.table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-child, .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-child{width:60px;padding:8px}}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.pagination-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1.5rem;border-top:1px solid var(--border-light);background:var(--surface)}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]{width:100px;margin:0}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding:0}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{height:40px;padding:0 .5rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{height:40px}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     input.mat-mdc-input-element{text-align:center;margin-top:0}@media screen and (max-width: 768px){.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{width:100%;justify-content:center}.pagination-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{width:100%}}.status-select[_ngcontent-%COMP%]{width:140px}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{padding:0 8px}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding:8px 0;min-height:unset}.status-select[_ngcontent-%COMP%]     .mat-mdc-select-value{padding:4px 0}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-underline{display:none}@media screen and (max-width: 600px){.status-select[_ngcontent-%COMP%]{width:120px}}  .mat-mdc-select-panel .mat-mdc-option{padding:4px 8px;height:40px}  .mat-mdc-select-panel .mat-mdc-option .mat-mdc-chip{margin:0}  .success-snackbar{background:var(--primary);color:#fff}  .error-snackbar{background:var(--warn);color:#fff}"]})}}return t})();export{Ke as DashboardComponent};
