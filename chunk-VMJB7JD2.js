import{a as wt,b as yt}from"./chunk-VTTL5WBB.js";import{Aa as ht,Ca as Mt,Ea as b,Fa as xt,Ga as v,Ha as Pt,Ia as Ot,Ja as St,Ka as bt,L as B,R as N,ba as Q,da as X,ea as Y,fa as Z,ga as tt,ha as et,ia as nt,ja as at,ka as it,la as ot,ma as rt,oa as ct,pa as lt,qa as mt,ra as S,sa as dt,ta as pt,ua as st,va as gt,wa as Ct,xa as _t,ya as ut,za as ft}from"./chunk-RHFUL4ZL.js";import{$ as I,Ac as U,Bb as g,Cb as T,Cc as q,Db as E,Eb as D,Fc as G,Ga as l,Gb as V,Gc as J,Ha as w,Hb as F,Ic as K,Kc as vt,Xa as d,Za as _,bc as H,cb as z,ea as k,fc as L,gb as i,hb as o,ib as h,ic as j,ja as R,jb as p,kb as s,kc as $,mb as y,pa as u,pb as M,qa as f,rb as C,tc as A,vb as x,wb as P,xb as O,xc as W,zb as c}from"./chunk-BGR6RSDP.js";var Tt=(()=>{class t{constructor(e){this.http=e,this.baseURL=vt.baseURL}getHeaders(){let e=localStorage.getItem("token");return new j().set("Authorization",`Bearer ${e}`)}getAllContacts(e=1,n=10){let r={page:e,pageSize:n};return this.http.post(`${this.baseURL}/api/contacts/getAllContacts/`,r,{headers:this.getHeaders()})}updateContactStatus(e,n){return this.http.put(`${this.baseURL}/api/contacts/updateStatus/`,{id:e,status:n},{headers:this.getHeaders()})}static{this.\u0275fac=function(n){return new(n||t)(k($))}}static{this.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var kt=()=>[2,5,10,25,100];function Rt(t,a){t&1&&(i(0,"div",2),h(1,"mat-spinner",3),o())}function zt(t,a){t&1&&(i(0,"th",27),c(1," No. "),o())}function Vt(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.index,n=C(2);l(),g(" ",(n.currentPage-1)*n.pageSize+e+1," ")}}function Ft(t,a){t&1&&(i(0,"th",29),c(1," Name "),o())}function Ht(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.$implicit;l(),g(" ",e.full_name," ")}}function Lt(t,a){t&1&&(i(0,"th",29),c(1," Email "),o())}function jt(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.$implicit;l(),g(" ",e.email," ")}}function $t(t,a){t&1&&(i(0,"th",29),c(1," Subject "),o())}function Bt(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.$implicit;l(),g(" ",e.subject," ")}}function Nt(t,a){t&1&&(i(0,"th",29),c(1," Mobile "),o())}function Qt(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.$implicit;l(),g(" ",e.mobilenumber," ")}}function At(t,a){t&1&&(i(0,"th",29),c(1," Company Name "),o())}function Wt(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.$implicit;l(),g(" ",e.company_name," ")}}function Ut(t,a){t&1&&(i(0,"th",29),c(1," Designation "),o())}function qt(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.$implicit;l(),g(" ",e.designation," ")}}function Gt(t,a){t&1&&(i(0,"th",29),c(1," Country "),o())}function Jt(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.$implicit;l(),g(" ",e.country," ")}}function Kt(t,a){t&1&&(i(0,"th",29),c(1," Status "),o())}function Xt(t,a){if(t&1&&(i(0,"mat-option",33)(1,"mat-chip",34),c(2),o()()),t&2){let e=a.$implicit,n=C(3);_("value",e.value),l(),_("color",n.getStatusColor(e.value)),l(),g(" ",e.label," ")}}function Yt(t,a){if(t&1){let e=y();i(0,"td",28)(1,"mat-form-field",30)(2,"mat-select",31),D("valueChange",function(r){let m=u(e).$implicit;return E(m.status,r)||(m.status=r),f(r)}),M("selectionChange",function(r){let m=u(e).$implicit,Et=C(2);return f(Et.onStatusChange(m.id,r.value))}),d(3,Xt,3,3,"mat-option",32),o()()()}if(t&2){let e=a.$implicit,n=C(2);l(2),T("value",e.status),l(),_("ngForOf",n.statusOptions)}}function Zt(t,a){t&1&&(i(0,"th",29),c(1," Date "),o())}function te(t,a){if(t&1&&(i(0,"td",28),c(1),o()),t&2){let e=a.$implicit,n=C(2);l(),g(" ",n.formatDate(e.created_at)," ")}}function ee(t,a){t&1&&h(0,"tr",35)}function ne(t,a){t&1&&h(0,"tr",36)}function ae(t,a){if(t&1){let e=y();i(0,"div",4)(1,"table",5),p(2,6),d(3,zt,2,0,"th",7)(4,Vt,2,1,"td",8),s(),p(5,9),d(6,Ft,2,0,"th",10)(7,Ht,2,1,"td",8),s(),p(8,11),d(9,Lt,2,0,"th",10)(10,jt,2,1,"td",8),s(),p(11,12),d(12,$t,2,0,"th",10)(13,Bt,2,1,"td",8),s(),p(14,13),d(15,Nt,2,0,"th",10)(16,Qt,2,1,"td",8),s(),p(17,14),d(18,At,2,0,"th",10)(19,Wt,2,1,"td",8),s(),p(20,15),d(21,Ut,2,0,"th",10)(22,qt,2,1,"td",8),s(),p(23,16),d(24,Gt,2,0,"th",10)(25,Jt,2,1,"td",8),s(),p(26,17),d(27,Kt,2,0,"th",10)(28,Yt,4,2,"td",8),s(),p(29,18),d(30,Zt,2,0,"th",10)(31,te,2,1,"td",8),s(),d(32,ee,1,0,"tr",19)(33,ne,1,0,"tr",20),o(),i(34,"div",21)(35,"div",22),c(36," Goto Page "),i(37,"mat-form-field",23)(38,"input",24),D("ngModelChange",function(r){u(e);let m=C();return E(m.currentPage,r)||(m.currentPage=r),f(r)}),M("keyup.enter",function(){u(e);let r=C();return f(r.goToPage(r.currentPage))}),o(),h(39,"span",25),o()(),i(40,"mat-paginator",26),M("page",function(r){u(e);let m=C();return f(m.onPageChange(r))}),o()()()}if(t&2){let e=C();l(),_("dataSource",e.dataSource),l(31),_("matHeaderRowDef",e.displayedColumns),l(),_("matRowDefColumns",e.displayedColumns),l(5),T("ngModel",e.currentPage),_("max",e.getTotalPages()),l(2),_("length",e.totalRecords)("pageSize",e.pageSize)("pageSizeOptions",F(9,kt))("pageIndex",e.currentPage-1)}}var Re=(()=>{class t{constructor(e,n){this.contactService=e,this.snackBar=n,this.displayedColumns=["no","full_name","email","subject","mobilenumber","company_name","designation","country","status","created_at"],this.dataSource=[],this.isLoading=!0,this.totalRecords=0,this.pageSize=10,this.currentPage=1,this.statusOptions=[{value:"P",label:"Pending"},{value:"C",label:"Completed"},{value:"D",label:"Declined"}]}ngOnInit(){this.loadContacts()}loadContacts(e=1){this.isLoading=!0,this.contactService.getAllContacts(e,this.pageSize).subscribe({next:n=>{this.dataSource=n.data,this.totalRecords=n.pagination.totalRecords,this.pageSize=n.pagination.pageSize,this.isLoading=!1,this.table&&this.table.renderRows()},error:n=>{console.error("Error loading contacts:",n),this.isLoading=!1}})}getStatusColor(e){switch(e){case"C":return"primary";case"D":return"warn";default:return"accent"}}getStatusText(e){switch(e){case"C":return"Completed";case"D":return"Declined";default:return"Pending"}}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}hasPreviousPage(){return this.currentPage>1}hasNextPage(){return this.currentPage<this.getTotalPages()}getTotalPages(){return Math.ceil(this.totalRecords/this.pageSize)}previousPage(){this.hasPreviousPage()&&this.goToPage(this.currentPage-1)}nextPage(){this.hasNextPage()&&this.goToPage(this.currentPage+1)}goToFirst(){this.goToPage(1)}goToLast(){this.goToPage(this.getTotalPages())}goToPage(e){let n=this.getTotalPages();e>=1&&e<=n&&(this.currentPage=e,this.loadContacts(e))}onPageChange(e){this.pageSize=e.pageSize,this.currentPage=e.pageIndex+1,this.loadContacts(this.currentPage)}onStatusChange(e,n){this.contactService.updateContactStatus(e,n).subscribe({next:r=>{this.snackBar.open(r.message,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]}),this.loadContacts(this.currentPage)},error:r=>{this.snackBar.open("Failed to update status","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}static{this.\u0275fac=function(n){return new(n||t)(w(Tt),w(Q))}}static{this.\u0275cmp=R({type:t,selectors:[["app-contact"]],viewQuery:function(n,r){if(n&1&&(x(b,5),x(v,5),x(S,5)),n&2){let m;P(m=O())&&(r.paginator=m.first),P(m=O())&&(r.sort=m.first),P(m=O())&&(r.table=m.first)}},standalone:!0,features:[V],decls:8,vars:1,consts:[[1,"contact-container"],[1,"contact-card"],[1,"loading-spinner"],["diameter","40"],[1,"table-container"],["mat-table","","matSort","",1,"contact-table",3,"dataSource"],["matColumnDef","no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","full_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","subject"],["matColumnDef","mobilenumber"],["matColumnDef","company_name"],["matColumnDef","designation"],["matColumnDef","country"],["matColumnDef","status"],["matColumnDef","created_at"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"pagination-container"],[1,"pagination-controls"],["appearance","outline",1,"page-number-input"],["matInput","","type","number","min","1",3,"ngModelChange","keyup.enter","ngModel","max"],["matSuffix",""],["showFirstLastButtons","","aria-label","Select page",3,"page","length","pageSize","pageSizeOptions","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["appearance","outline",1,"status-select"],[3,"valueChange","selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["selected","",3,"color"],["mat-header-row",""],["mat-row",""]],template:function(n,r){n&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),c(4,"Contact Messages"),o()(),i(5,"mat-card-content"),d(6,Rt,2,0,"div",2)(7,ae,41,10),o()()()),n&2&&(l(6),z(6,r.isLoading?6:7))},dependencies:[L,H,Mt,S,pt,_t,st,dt,ut,gt,Ct,ft,ht,xt,b,Ot,v,Pt,rt,nt,it,ot,at,bt,St,yt,wt,K,A,q,W,J,G,U,ct,Z,Y,X,et,tt,N,mt,lt,B],styles:[".contact-container[_ngcontent-%COMP%]{padding:20px}@media screen and (max-width: 600px){.contact-container[_ngcontent-%COMP%]{padding:10px}}.contact-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:8px}.contact-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px;background-color:var(--primary);border-radius:8px 8px 0 0}.contact-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:var(--text-white);margin:0;font-size:1.25rem;font-weight:500}.table-container[_ngcontent-%COMP%]{margin-top:16px;overflow-x:auto}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{white-space:nowrap;padding:16px;font-weight:500;color:var(--text-primary);background-color:var(--primary-lighter)}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-child{width:80px;text-align:center}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:12px 16px}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-child{text-align:center;color:var(--primary);font-weight:500}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{min-height:24px;font-size:12px}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--hover)}@media screen and (max-width: 600px){.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:8px;font-size:.875rem}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-child, .table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-child{width:60px;padding:8px}}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}  .mat-mdc-paginator{background:transparent}  .mat-mdc-chip.mat-mdc-standard-chip{--mdc-chip-container-height: 24px}.pagination-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1.5rem;border-top:1px solid var(--border-light);background:var(--surface)}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%], .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]{width:100px;margin:0}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding:0}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{height:40px;padding:0 .5rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{height:40px}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     input.mat-mdc-input-element{text-align:center;margin-top:0}.pagination-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{background:transparent}@media screen and (max-width: 768px){.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{width:100%;justify-content:center}.pagination-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{width:100%}}.status-select[_ngcontent-%COMP%]{width:140px}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{padding:0 8px}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding:8px 0;min-height:unset}.status-select[_ngcontent-%COMP%]     .mat-mdc-select-value{padding:4px 0}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-underline{display:none}@media screen and (max-width: 600px){.status-select[_ngcontent-%COMP%]{width:120px}}  .mat-mdc-select-panel .mat-mdc-option{padding:4px 8px;height:40px}  .mat-mdc-select-panel .mat-mdc-option .mat-mdc-chip{margin:0}  .success-snackbar{background:var(--primary);color:#fff}  .error-snackbar{background:var(--warn);color:#fff}"]})}}return t})();export{Re as ContactComponent};
