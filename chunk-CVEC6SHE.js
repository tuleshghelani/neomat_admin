import{a as wt,b as vt}from"./chunk-XERNE5LN.js";import{Aa as ft,Ca as ht,Ea as S,Fa as Mt,Ga as w,Ha as Pt,Ia as xt,Ja as Ot,Ka as bt,L as B,R as N,ba as Q,da as K,ea as X,fa as Y,ga as Z,ha as tt,ia as et,ja as nt,ka as at,la as it,ma as ot,oa as rt,pa as ct,qa as lt,ra as b,sa as mt,ta as st,ua as dt,va as pt,wa as gt,xa as Ct,ya as ut,za as _t}from"./chunk-AN3FBMY3.js";import{$ as R,Bb as u,Cb as T,Cc as q,Db as D,Dc as G,Eb as E,Fc as J,Ga as c,Gb as V,Ha as v,Hb as F,Hc as St,Xa as s,Za as p,bc as L,cb as z,ea as k,ec as j,gb as o,hb as r,ib as h,ic as H,ja as I,jb as g,kb as C,mb as y,pa as _,pb as M,qa as f,qc as $,rb as d,uc as W,vb as P,wb as x,xb as O,xc as A,zb as l,zc as U}from"./chunk-XABQCS33.js";var yt=(()=>{class e{constructor(t){this.http=t,this.baseURL=St.baseURL}getAllContacts(t=1,n=10){let i={page:t,pageSize:n};return this.http.post(`${this.baseURL}/api/contacts/getAllContacts/`,i)}updateContactStatus(t,n){return this.http.put(`${this.baseURL}/api/contacts/updateStatus/`,{id:t,status:n})}static{this.\u0275fac=function(n){return new(n||e)(k(H))}}static{this.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Rt=()=>[2,5,10,25,100];function kt(e,a){e&1&&(o(0,"div",2),h(1,"mat-spinner",3),r())}function It(e,a){e&1&&(o(0,"th",24),l(1," No. "),r())}function zt(e,a){if(e&1&&(o(0,"td",25),l(1),r()),e&2){let t=a.index,n=d(2);c(),u(" ",(n.currentPage-1)*n.pageSize+t+1," ")}}function Vt(e,a){e&1&&(o(0,"th",26),l(1," Name "),r())}function Ft(e,a){if(e&1&&(o(0,"td",25),l(1),r()),e&2){let t=a.$implicit;c(),u(" ",t.full_name," ")}}function Lt(e,a){e&1&&(o(0,"th",26),l(1," Email "),r())}function jt(e,a){if(e&1&&(o(0,"td",25),l(1),r()),e&2){let t=a.$implicit;c(),u(" ",t.email," ")}}function Ht(e,a){e&1&&(o(0,"th",26),l(1," Subject "),r())}function Bt(e,a){if(e&1&&(o(0,"td",25),l(1),r()),e&2){let t=a.$implicit;c(),u(" ",t.subject," ")}}function Nt(e,a){e&1&&(o(0,"th",26),l(1," Mobile "),r())}function Qt(e,a){if(e&1&&(o(0,"td",25),l(1),r()),e&2){let t=a.$implicit;c(),u(" ",t.mobilenumber," ")}}function $t(e,a){e&1&&(o(0,"th",26),l(1," Status "),r())}function Wt(e,a){if(e&1&&(o(0,"mat-option",30)(1,"mat-chip",31),l(2),r()()),e&2){let t=a.$implicit,n=d(3);p("value",t.value),c(),p("color",n.getStatusColor(t.value)),c(),u(" ",t.label," ")}}function At(e,a){if(e&1){let t=y();o(0,"td",25)(1,"mat-form-field",27)(2,"mat-select",28),E("valueChange",function(i){let m=_(t).$implicit;return D(m.status,i)||(m.status=i),f(i)}),M("selectionChange",function(i){let m=_(t).$implicit,Tt=d(2);return f(Tt.onStatusChange(m.id,i.value))}),s(3,Wt,3,3,"mat-option",29),r()()()}if(e&2){let t=a.$implicit,n=d(2);c(2),T("value",t.status),c(),p("ngForOf",n.statusOptions)}}function Ut(e,a){e&1&&(o(0,"th",26),l(1," Date "),r())}function qt(e,a){if(e&1&&(o(0,"td",25),l(1),r()),e&2){let t=a.$implicit,n=d(2);c(),u(" ",n.formatDate(t.created_at)," ")}}function Gt(e,a){e&1&&h(0,"tr",32)}function Jt(e,a){e&1&&h(0,"tr",33)}function Kt(e,a){if(e&1){let t=y();o(0,"div",4)(1,"table",5),g(2,6),s(3,It,2,0,"th",7)(4,zt,2,1,"td",8),C(),g(5,9),s(6,Vt,2,0,"th",10)(7,Ft,2,1,"td",8),C(),g(8,11),s(9,Lt,2,0,"th",10)(10,jt,2,1,"td",8),C(),g(11,12),s(12,Ht,2,0,"th",10)(13,Bt,2,1,"td",8),C(),g(14,13),s(15,Nt,2,0,"th",10)(16,Qt,2,1,"td",8),C(),g(17,14),s(18,$t,2,0,"th",10)(19,At,4,2,"td",8),C(),g(20,15),s(21,Ut,2,0,"th",10)(22,qt,2,1,"td",8),C(),s(23,Gt,1,0,"tr",16)(24,Jt,1,0,"tr",17),r(),o(25,"div",18)(26,"div",19),l(27," Goto Page "),o(28,"mat-form-field",20)(29,"input",21),E("ngModelChange",function(i){_(t);let m=d();return D(m.currentPage,i)||(m.currentPage=i),f(i)}),M("keyup.enter",function(){_(t);let i=d();return f(i.goToPage(i.currentPage))}),r(),h(30,"span",22),r()(),o(31,"mat-paginator",23),M("page",function(i){_(t);let m=d();return f(m.onPageChange(i))}),r()()()}if(e&2){let t=d();c(),p("dataSource",t.dataSource),c(22),p("matHeaderRowDef",t.displayedColumns),c(),p("matRowDefColumns",t.displayedColumns),c(5),T("ngModel",t.currentPage),p("max",t.getTotalPages()),c(2),p("length",t.totalRecords)("pageSize",t.pageSize)("pageSizeOptions",F(9,Rt))("pageIndex",t.currentPage-1)}}var we=(()=>{class e{constructor(t,n){this.contactService=t,this.snackBar=n,this.displayedColumns=["no","full_name","email","subject","mobilenumber","status","created_at"],this.dataSource=[],this.isLoading=!0,this.totalRecords=0,this.pageSize=10,this.currentPage=1,this.statusOptions=[{value:"P",label:"Pending"},{value:"C",label:"Completed"},{value:"D",label:"Declined"}]}ngOnInit(){this.loadContacts()}loadContacts(t=1){this.isLoading=!0,this.contactService.getAllContacts(t,this.pageSize).subscribe({next:n=>{this.dataSource=n.data,this.totalRecords=n.pagination.totalRecords,this.pageSize=n.pagination.pageSize,this.isLoading=!1,this.table&&this.table.renderRows()},error:n=>{console.error("Error loading contacts:",n),this.isLoading=!1}})}getStatusColor(t){switch(t){case"C":return"primary";case"D":return"warn";default:return"accent"}}getStatusText(t){switch(t){case"C":return"Completed";case"D":return"Declined";default:return"Pending"}}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}hasPreviousPage(){return this.currentPage>1}hasNextPage(){return this.currentPage<this.getTotalPages()}getTotalPages(){return Math.ceil(this.totalRecords/this.pageSize)}previousPage(){this.hasPreviousPage()&&this.goToPage(this.currentPage-1)}nextPage(){this.hasNextPage()&&this.goToPage(this.currentPage+1)}goToFirst(){this.goToPage(1)}goToLast(){this.goToPage(this.getTotalPages())}goToPage(t){let n=this.getTotalPages();t>=1&&t<=n&&(this.currentPage=t,this.loadContacts(t))}onPageChange(t){this.pageSize=t.pageSize,this.currentPage=t.pageIndex+1,this.loadContacts(this.currentPage)}onStatusChange(t,n){this.contactService.updateContactStatus(t,n).subscribe({next:i=>{this.snackBar.open(i.message,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]}),this.loadContacts(this.currentPage)},error:i=>{this.snackBar.open("Failed to update status","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}static{this.\u0275fac=function(n){return new(n||e)(v(yt),v(Q))}}static{this.\u0275cmp=I({type:e,selectors:[["app-contact"]],viewQuery:function(n,i){if(n&1&&(P(S,5),P(w,5),P(b,5)),n&2){let m;x(m=O())&&(i.paginator=m.first),x(m=O())&&(i.sort=m.first),x(m=O())&&(i.table=m.first)}},standalone:!0,features:[V],decls:8,vars:1,consts:[[1,"contact-container"],[1,"contact-card"],[1,"loading-spinner"],["diameter","40"],[1,"table-container"],["mat-table","","matSort","",1,"contact-table",3,"dataSource"],["matColumnDef","no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","full_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","subject"],["matColumnDef","mobilenumber"],["matColumnDef","status"],["matColumnDef","created_at"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"pagination-container"],[1,"pagination-controls"],["appearance","outline",1,"page-number-input"],["matInput","","type","number","min","1",3,"ngModelChange","keyup.enter","ngModel","max"],["matSuffix",""],["showFirstLastButtons","","aria-label","Select page",3,"page","length","pageSize","pageSizeOptions","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["appearance","outline",1,"status-select"],[3,"valueChange","selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["selected","",3,"color"],["mat-header-row",""],["mat-row",""]],template:function(n,i){n&1&&(o(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),l(4,"Contact Messages"),r()(),o(5,"mat-card-content"),s(6,kt,2,0,"div",2)(7,Kt,32,10),r()()()),n&2&&(c(6),z(6,i.isLoading?6:7))},dependencies:[j,L,ht,b,st,Ct,dt,mt,ut,pt,gt,_t,ft,Mt,S,xt,w,Pt,ot,et,at,it,nt,bt,Ot,vt,wt,J,$,U,W,G,q,A,rt,Y,X,K,tt,Z,N,lt,ct,B],styles:[".contact-container[_ngcontent-%COMP%]{padding:20px}@media screen and (max-width: 600px){.contact-container[_ngcontent-%COMP%]{padding:10px}}.contact-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:8px}.contact-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px;background-color:var(--primary);border-radius:8px 8px 0 0}.contact-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:var(--text-white);margin:0;font-size:1.25rem;font-weight:500}.table-container[_ngcontent-%COMP%]{margin-top:16px;overflow-x:auto}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{white-space:nowrap;padding:16px;font-weight:500;color:var(--text-primary);background-color:var(--primary-lighter)}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-child{width:80px;text-align:center}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:12px 16px}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-child{text-align:center;color:var(--primary);font-weight:500}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{min-height:24px;font-size:12px}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--hover)}@media screen and (max-width: 600px){.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:8px;font-size:.875rem}.table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-child, .table-container[_ngcontent-%COMP%]   .contact-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-child{width:60px;padding:8px}}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}  .mat-mdc-paginator{background:transparent}  .mat-mdc-chip.mat-mdc-standard-chip{--mdc-chip-container-height: 24px}.pagination-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1.5rem;border-top:1px solid var(--border-light);background:var(--surface)}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%], .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]{width:100px;margin:0}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding:0}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{height:40px;padding:0 .5rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{height:40px}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-input-container[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     input.mat-mdc-input-element{text-align:center;margin-top:0}.pagination-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{background:transparent}@media screen and (max-width: 768px){.pagination-container[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{width:100%;justify-content:center}.pagination-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{width:100%}}.status-select[_ngcontent-%COMP%]{width:140px}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{padding:0 8px}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding:8px 0;min-height:unset}.status-select[_ngcontent-%COMP%]     .mat-mdc-select-value{padding:4px 0}.status-select[_ngcontent-%COMP%]     .mat-mdc-form-field-underline{display:none}@media screen and (max-width: 600px){.status-select[_ngcontent-%COMP%]{width:120px}}  .mat-mdc-select-panel .mat-mdc-option{padding:4px 8px;height:40px}  .mat-mdc-select-panel .mat-mdc-option .mat-mdc-chip{margin:0}  .success-snackbar{background:var(--primary);color:#fff}  .error-snackbar{background:var(--warn);color:#fff}"]})}}return e})();export{we as ContactComponent};
