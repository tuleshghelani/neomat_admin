import{$,Aa as ft,Ba as Pt,Ca as bt,Da as Ot,Ea as xt,P as V,aa as B,ba as K,ca as Q,da as X,ea as Y,fa as tt,ga as nt,ha as et,ia as at,ja as it,ka as ot,ma as rt,oa as ct,pa as dt,qa as lt,ra as mt,sa as st,ta as gt,ua as pt,va as _t,wa as Ct,xa as ht,ya as ut,za as Mt}from"./chunk-UZLLSVTP.js";import{Ab as C,Bb as b,Bc as W,Cb as q,Cc as G,Db as I,E as S,Eb as z,Ec as J,Ga as d,Gb as k,Gc as St,Ha as f,Hb as R,M as w,Oa as v,W as D,Xa as l,Ya as E,Za as s,bc as N,dc as H,gb as i,gc as F,hb as a,hc as L,ib as h,j as O,ja as y,jb as g,kb as p,mb as T,p as x,pa as u,pb as P,pc as j,qa as M,rb as _,tc as A,wc as Z,yc as U,zb as r}from"./chunk-BAO3T34Y.js";var wt=()=>[2,5,10,25,50];function Dt(t,e){t&1&&(i(0,"th",18),r(1,"No."),a())}function yt(t,e){if(t&1&&(i(0,"td",19),r(1),a()),t&2){let n=e.index,c=_();d(),b(" ",(c.pagination.currentPage-1)*c.pagination.pageSize+n+1," ")}}function vt(t,e){t&1&&(i(0,"th",18),r(1,"Name"),a())}function Et(t,e){if(t&1&&(i(0,"td",19),r(1),a()),t&2){let n=e.$implicit;d(),C(n.name)}}function Tt(t,e){t&1&&(i(0,"th",18),r(1,"Company"),a())}function qt(t,e){if(t&1&&(i(0,"td",19),r(1),a()),t&2){let n=e.$implicit;d(),C(n.company_name)}}function It(t,e){t&1&&(i(0,"th",18),r(1,"Email"),a())}function zt(t,e){if(t&1&&(i(0,"td",19),r(1),a()),t&2){let n=e.$implicit;d(),C(n.email)}}function kt(t,e){t&1&&(i(0,"th",18),r(1,"Mobile"),a())}function Rt(t,e){if(t&1&&(i(0,"td",19),r(1),a()),t&2){let n=e.$implicit;d(),C(n.mobilenumber)}}function Nt(t,e){t&1&&(i(0,"th",18),r(1,"Address"),a())}function Ht(t,e){if(t&1&&(i(0,"td",19),r(1),a()),t&2){let n=e.$implicit;d(),C(n.address)}}function Ft(t,e){t&1&&(i(0,"th",18),r(1,"Created Date"),a())}function Lt(t,e){if(t&1&&(i(0,"td",19),r(1),a()),t&2){let n=e.$implicit,c=_();d(),C(c.formatDate(n.created_at))}}function Vt(t,e){t&1&&h(0,"tr",20)}function $t(t,e){t&1&&h(0,"tr",21)}function Bt(t,e){if(t&1&&(i(0,"tr",22)(1,"td",23),r(2),a()()),t&2){let n=_();d(),E("colspan",n.displayedColumns.length),d(),b(" ",n.error||"No enquiries found"," ")}}function jt(t,e){t&1&&(i(0,"div",24),h(1,"mat-spinner",25),a())}function At(t,e){if(t&1){let n=T();i(0,"div",26)(1,"div",27),r(2," Goto Page "),i(3,"mat-form-field",28)(4,"input",29),z("ngModelChange",function(o){u(n);let m=_();return I(m.customPageNumber,o)||(m.customPageNumber=o),M(o)}),P("keyup.enter",function(){u(n);let o=_();return M(o.goToPage(o.customPageNumber))}),a(),h(5,"span",30),a()(),i(6,"mat-paginator",31),P("page",function(o){u(n);let m=_();return M(m.onPageChange(o))}),a()()}if(t&2){let n=_();d(4),q("ngModel",n.customPageNumber),s("max",n.pagination.totalPages),d(2),s("length",n.pagination.totalRecords)("pageSize",n.pagination.pageSize)("pageIndex",n.pagination.currentPage-1)("pageSizeOptions",R(6,wt))}}var fn=(()=>{class t{constructor(n,c,o){this.http=n,this.ngZone=c,this.snackBar=o,this.displayedColumns=["no","name","company_name","email","mobilenumber","address","created_at"],this.dataSource=[],this.pagination={currentPage:1,pageSize:10,totalRecords:0,totalPages:0,hasNext:!1,hasPrevious:!1},this.isLoading=!1,this.customPageNumber=1,this.error=null,this.destroy$=new O}ngOnInit(){this.loadEnquiries()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadEnquiries(n=1){if(this.isLoading)return;this.isLoading=!0,this.error=null;let c=localStorage.getItem("token");if(!c){this.showError("Authentication token not found");return}let o=new F().set("Authorization",`Bearer ${c}`);this.ngZone.runOutsideAngular(()=>{this.http.post(`${St.baseURL}/api/enquiries/getAllEnquiries/`,{page:n,pageSize:this.pagination.pageSize},{headers:o}).pipe(D(this.destroy$),S(m=>(this.ngZone.run(()=>this.showError("Failed to load enquiries")),x(null))),w(()=>{this.ngZone.run(()=>{this.isLoading=!1})})).subscribe(m=>{m&&this.ngZone.run(()=>{this.dataSource=m.data,this.pagination=m.pagination,this.customPageNumber=this.pagination.currentPage})})})}onPageChange(n){this.pagination.pageSize=n.pageSize,this.loadEnquiries(n.pageIndex+1)}goToPage(n){n>=1&&n<=this.pagination.totalPages&&this.loadEnquiries(n)}goToFirst(){this.loadEnquiries(1)}goToLast(){this.loadEnquiries(this.pagination.totalPages)}formatDate(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}showError(n){this.error=n,this.snackBar.open(n,"Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]}),this.isLoading=!1}static{this.\u0275fac=function(c){return new(c||t)(f(L),f(v),f($))}}static{this.\u0275cmp=y({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[k],decls:34,vars:6,consts:[[1,"dashboard-container"],["appearance","outlined",1,"table-card"],[1,"table-container"],["mat-table","",1,"enquiries-table",3,"dataSource"],["matColumnDef","no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","company_name"],["matColumnDef","email"],["matColumnDef","mobilenumber"],["matColumnDef","address"],["matColumnDef","created_at"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","loading-overlay",4,"ngIf"],["class","pagination-container",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell",2,"text-align","center","padding","1rem"],[1,"loading-overlay"],["diameter","40","color","primary"],[1,"pagination-container"],[1,"pagination-controls"],["appearance","outline",1,"page-number-input"],["matInput","","type","number","min","1",3,"ngModelChange","keyup.enter","ngModel","max"],["matSuffix",""],["showFirstLastButtons","","aria-label","Select page",3,"page","length","pageSize","pageIndex","pageSizeOptions"]],template:function(c,o){c&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),r(4,"Enquiries"),a()(),i(5,"mat-card-content")(6,"div",2)(7,"table",3),g(8,4),l(9,Dt,2,0,"th",5)(10,yt,2,1,"td",6),p(),g(11,7),l(12,vt,2,0,"th",5)(13,Et,2,1,"td",6),p(),g(14,8),l(15,Tt,2,0,"th",5)(16,qt,2,1,"td",6),p(),g(17,9),l(18,It,2,0,"th",5)(19,zt,2,1,"td",6),p(),g(20,10),l(21,kt,2,0,"th",5)(22,Rt,2,1,"td",6),p(),g(23,11),l(24,Nt,2,0,"th",5)(25,Ht,2,1,"td",6),p(),g(26,12),l(27,Ft,2,0,"th",5)(28,Lt,2,1,"td",6),p(),l(29,Vt,1,0,"tr",13)(30,$t,1,0,"tr",14)(31,Bt,3,2,"tr",15),a(),l(32,jt,2,0,"div",16),a(),l(33,At,7,7,"div",17),a()()()),c&2&&(d(7),s("dataSource",o.dataSource),d(22),s("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),d(),s("matRowDefColumns",o.displayedColumns),d(2),s("ngIf",o.isLoading),d(),s("ngIf",o.dataSource&&o.dataSource.length>0))},dependencies:[H,N,J,j,U,A,G,W,Z,Mt,ct,lt,pt,mt,dt,_t,st,gt,Ct,ht,ut,bt,Pt,X,Q,K,tt,Y,V,rt,ot,nt,at,it,et,xt,Ot,ft,B],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:1.5rem;min-height:calc(100vh - 64px)}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;transition:box-shadow .3s ease}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:1.25rem;border-bottom:1px solid var(--border-light)}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:500;color:var(--text-primary)}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex:1;padding:0;display:flex;flex-direction:column}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;flex:1;overflow:auto}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]{width:100%}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;font-weight:500;white-space:nowrap}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{padding-left:1.5rem}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{padding-right:1.5rem}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:1.5rem;color:var(--primary);font-weight:500}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:1.5rem}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   tr.mat-mdc-row[_ngcontent-%COMP%]{height:56px;transition:background-color .2s ease}.dashboard-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;justify-content:center;align-items:center;z-index:2}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-top:1px solid var(--border-light);display:flex;align-items:center;justify-content:space-between;background:var(--surface)}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]{width:100px;margin:0 .5rem}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding:0}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{height:40px;padding:0 .5rem;background-color:transparent!important}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{height:40px}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-number-input[_ngcontent-%COMP%]     input.mat-mdc-input-element{text-align:center;margin-top:0}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;line-height:36px;padding:0}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px}.dashboard-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5}@media screen and (max-width: 1024px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:1rem}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, .dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:1rem}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .enquiries-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:1rem}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]{padding:.5rem 1rem;flex-direction:column;gap:1rem}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}}@media screen and (max-width: 600px){.dashboard-container[_ngcontent-%COMP%]{padding:.5rem}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:.75rem}.dashboard-container[_ngcontent-%COMP%]   .table-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.125rem}}"]})}}return t})();export{fn as DashboardComponent};
